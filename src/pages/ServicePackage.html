<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service & Package Management</title>
    <link rel="stylesheet" href="../styles/ServicePackage.css">
</head>
<body>
    <div class="container" id="main-page">
        <h1>Service & Package Management</h1>
        <button class="add-button btn-blue" onclick="showPage('add-service');">Add New Service</button>
        <button class="add-button btn-green" onclick="showPage('add-package');">Add New Package</button>
        
        <h2>Services & Packages</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Status</th>
                    <th>Commission</th>
                </tr>
            </thead>
            <tbody id="service-package-table">
                
            </tbody>
        </table>
    </div>

    
    <div class="container" id="add-service" style="display: none;">
        <h1 id="service-title">Add New Service</h1>
        <form id="service-form">
            <label>Name: <input type="text" id="service-name" required></label>
            <label>Description: <textarea id="service-desc" required></textarea></label>
            <label>Type of Service: <input type="text" id="service-type" required></label>
            <label>Room Type:
                <select id="room-type">
                    <option value="Chair">Chair</option>
                    <option value="Room">Room</option>
                </select>
            </label>
            <label>Price: <input type="number" id="service-price" required></label>
            <label>Commission (%): <input type="number" id="service-commission" required oninput="computeCommission();"></label>
            <label>Computed Commission: <span id="computed-commission">0</span></label>
            <label>Status:
                <select id="service-status">
                    <option>Active</option>
                    <option>Inactive</option>
                </select>
            </label>
            <button type="button" onclick="showPage('main-page');">Cancel</button>
            <button type="button" onclick="deleteService();">Delete</button>
            <button type="submit">Save</button>
        </form>
    </div>

    <script>
        function showPage(pageId) {
            document.querySelectorAll('.container').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
        }

        function computeCommission() {
            const price = parseFloat(document.getElementById('service-price').value) || 0;
            const commissionPercent = parseFloat(document.getElementById('service-commission').value) || 0;
            const commission = (price * commissionPercent) / 100;
            document.getElementById('computed-commission').textContent = commission.toFixed(2);
        }

        document.getElementById('service-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const name = document.getElementById('service-name').value;
            const price = document.getElementById('service-price').value;
            const status = document.getElementById('service-status').value;
            const commission = document.getElementById('computed-commission').textContent;
            const type = document.getElementById('service-title').textContent.includes("Edit") ? "Service" : "Package";
            
            const tableBody = document.getElementById('service-package-table');
            const row = document.createElement('tr');
            row.innerHTML = `<td>${tableBody.children.length + 1}</td><td>${name}</td><td>${type}</td><td>${price}</td><td>${status}</td><td>${commission}</td>`;
            row.onclick = function() { editService(name, price, status, commission, type); };
            tableBody.appendChild(row);

            showPage('main-page');
        });

        function editService(name, price, status, commission, type) {
            document.getElementById('service-title').textContent = `Edit ${type}`;
            document.getElementById('service-name').value = name;
            document.getElementById('service-price').value = price;
            document.getElementById('service-status').value = status;
            document.getElementById('service-commission').value = (parseFloat(commission) / parseFloat(price)) * 100;
            computeCommission();
            showPage('add-service');
        }

        function deleteService() {
            alert("Service/Package deleted!");
            showPage('main-page');
        }
    </script>
</body>
</html>
